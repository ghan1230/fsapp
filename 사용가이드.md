# 📊 재무제표 시각화 애플리케이션 사용 가이드

## 🚀 실행 방법

1. **환경 설정**
   ```bash
   # 가상환경 활성화 (이미 되어있음)
   # 필요한 패키지 설치 (이미 되어있음)
   ```

2. **API 키 설정** (`.env` 파일)
   ```env
   # 한국 주식 - Open DART API 키 (필수)
   OPEN_DART_API_KEY=your_dart_api_key_here
   
   # 미국 주식 - Finnhub API 키 (필수)
   FINNHUB_API_KEY=your_finnhub_api_key_here
   
   # AI 분석 - Gemini API 키 (선택사항)
   GEMINI_API_KEY=your_gemini_api_key_here
   GEMINI_MODEL=gemini-2.5-pro
   ```
   
   - **Open DART API 키**: [DART 오픈API](https://opendart.fss.or.kr/)에서 발급 (한국 주식용)
   - **Finnhub API 키**: [Finnhub.io](https://finnhub.io/)에서 무료 발급 (미국 주식용)
     - 무료 플랜: 60 API calls/분, 뉴스/배당/동종업계 모두 지원
   - **Gemini API 키**: [Google AI Studio](https://aistudio.google.com/)에서 발급 (AI 분석용)
   - **Gemini 모델**: 사용할 모델 선택 (기본값: gemini-2.5-pro)
     - `gemini-2.5-pro`: 최신 고성능 모델 (권장, 30-45초 소요)
     - `gemini-1.5-flash`: 빠르고 효율적 (10-20초 소요)
     - `gemini-1.5-pro`: 고성능, 정확한 분석 (20-30초 소요)

3. **애플리케이션 실행**
   ```bash
   python app.py
   ```

4. **브라우저 접속**
   - 자동으로 브라우저가 열립니다
   - 또는 http://127.0.0.1:5000 에 직접 접속

## 📈 주요 기능

### 🇰🇷 한국 주식 분석

#### 1. 회사 검색
- 회사명을 입력하여 검색 (예: "삼성전자", "LG전자")
- 부분 일치로 검색 가능
- 최대 10개 결과 표시

#### 2. 재무 데이터 조회
- **사업연도**: 2018년~2025년 선택 가능
  - 2025년: 분기보고서만 가능 (1분기, 반기)
  - 2024년: 모든 보고서 가능
  - 2023년 이하: 모든 보고서 가능
- **보고서 유형**:
  - 사업보고서 (11011) - 연간 데이터 (2025년 제외)
  - 반기보고서 (11012) - 반기 데이터
  - 1분기보고서 (11013) - 1분기 데이터
  - 3분기보고서 (11014) - 3분기 데이터 (2025년 3분기는 11월 제출 예정)

### 🇺🇸 미국 주식 분석 (NEW!)

#### 1. 주식 검색
- 회사명 또는 티커 심볼로 검색 (예: "Apple", "AAPL")
- 실시간 검색 결과 제공
- 미국 주요 거래소 상장 종목 지원

#### 2. 종합 주식 정보
- **기업 정보**: 회사명, 산업, 시가총액, 거래소 등
- **실시간 주가**: 현재가, 변동률, 고가/저가, 거래량
- **재무 지표**: P/E, P/B, ROE, 부채비율, 배당수익률, 베타 등
- **분석가 추천**: 강력매수/매수/보유/매도 의견 통계

#### 3. 📰 뉴스 통합 (NEW!)
- **기업 관련 뉴스**: 최근 30일간 뉴스 최대 15개
- **감성 분석**: 긍정/부정/중립 자동 분류
- **뉴스 필터링** (NEW!): 감성별로 뉴스 필터링 (전체/긍정/부정/중립)
- **뉴스 출처**: 주요 금융 미디어 (Yahoo, Bloomberg 등)
- **실시간 업데이트**: 최신 뉴스 자동 반영
- **원문 링크**: 클릭하여 전체 기사 확인 가능

#### 4. 💵 배당 정보 (NEW!)
- **배당 수익률**: 현재 주가 대비 배당 수익률 계산
- **배당 히스토리**: 최근 20회 배당 내역 차트
- **연간 배당금**: 최근 4분기 배당금 합계
- **배당 성장률** (NEW!): 연평균 배당 성장률 자동 계산 (CAGR)
- **배당 주기**: 월별/분기별/반기별/연간 자동 판단
- **배당 캘린더** (NEW!): 다음 배당일 예측 및 표시
- **시각화**: 배당 히스토리 막대 차트로 표시

#### 5. 🏢 동종 업계 비교 (NEW!)
- **같은 산업군 기업**: 최대 5개 경쟁사 자동 선택
- **비교 지표**:
  - 현재가 및 변동률
  - 시가총액 (Billion 단위)
  - P/E 비율 (밸류에이션)
  - P/B 비율 (장부가 대비)
  - ROE (자기자본이익률)
- **상대적 위치**: 업계 평균 대비 현재 기업의 위치 파악
- **투자 인사이트**: 동종 업계 내 밸류에이션 비교

#### 6. 주가 차트
- **3개월 히스토리**: 최근 90일 주가 추이
- **인터랙티브 차트**: 마우스 오버로 상세 정보 확인
- **Yahoo Finance 데이터**: 안정적인 데이터 소스

### 3. 시각화 차트

#### 📊 재무 요약 카드
- 총자산, 매출액, 영업이익, 당기순이익
- 직관적인 금액 표시 (조, 억, 만 단위)

#### 🍩 재무상태표 차트 (도넛 차트)
- 자산, 부채, 자본의 구성 비율
- 마우스 오버 시 상세 금액 표시

#### 📊 손익계산서 차트 (막대 차트)
- 매출액, 영업이익, 당기순이익 비교
- Y축 자동 스케일링

#### 📈 연도별 추이 차트 (선 차트)
- 최근 3년간 매출 및 이익 추이
- 트렌드 분석 가능

#### 🎯 재무 비율 분석 (레이더 차트)
- 부채비율, 자기자본비율, 영업이익률, 순이익률
- 재무 건전성 한눈에 파악

#### 🤖 AI 재무제표 분석
- Gemini AI를 활용한 재무제표 쉬운 해석
- 재무 건전성, 수익성, 안정성 분석
- 투자자 관점의 핵심 포인트 제공

## 🔍 사용 예시

### 🇰🇷 한국 주식: 삼성전자 분석하기
1. 메인 페이지에서 회사명에 "삼성전자" 입력
2. 검색 버튼 클릭
3. 검색 결과에서 "삼성전자" 선택
4. 사업연도 "2023" 선택
5. 보고서 유형 "사업보고서" 선택
6. 자동으로 모든 차트가 생성됨

### 🇺🇸 미국 주식: Apple 종합 분석하기
1. 상단 메뉴에서 "미국 주식" 클릭
2. 검색창에 "Apple" 또는 "AAPL" 입력
3. 검색 결과에서 "AAPL - Apple Inc" 선택
4. 자동으로 다음 정보가 표시됨:
   - 기업 정보 및 실시간 주가
   - 재무 지표 및 분석가 추천
   - 3개월 주가 차트
   - **📰 최근 뉴스** (감성 분석 포함)
   - **💵 배당 정보** (배당 히스토리 차트)
   - **🏢 동종 업계 비교** (Dell, HP 등과 비교)
5. "AI 분석 시작" 버튼으로 종합 투자 분석 확인

### 배당주 투자 분석하기 (개선!)
1. 미국 주식 페이지에서 배당주 검색 (예: "KO" - Coca-Cola)
2. 배당 정보 섹션에서 확인:
   - 배당 수익률 (예: 3.2%)
   - 연간 배당금 (예: $2.01)
   - **배당 성장률** (예: +3.5% 연평균) - 녹색/빨간색으로 표시
   - **배당 주기** (예: Quarterly - 분기별)
   - **다음 배당일 예상** (예: 2025-12-15)
   - 배당 히스토리 차트로 배당 성장 추이 확인
3. 재무 지표에서 배당 지속 가능성 평가:
   - ROE, 부채비율, 순이익률 등
4. 뉴스 필터링으로 기업 전망 확인:
   - 긍정 뉴스가 많으면 배당 증가 가능성 높음

### 동종 업계 밸류에이션 비교
1. 관심 종목 선택 (예: "AAPL")
2. 동종 업계 비교 테이블에서 확인:
   - Apple vs Dell vs HP 등
   - P/E, P/B 비율로 상대적 저평가/고평가 판단
   - ROE로 수익성 비교
   - 시가총액으로 기업 규모 비교
3. 업계 평균 대비 투자 매력도 평가

### 뉴스 감성 분석 활용하기 (NEW!)
1. 관심 종목 선택
2. Company News 섹션에서 필터 버튼 클릭:
   - **전체**: 모든 뉴스 보기
   - **긍정 😊**: 좋은 소식만 보기 (주가 상승 요인)
   - **부정 😟**: 나쁜 소식만 보기 (리스크 요인)
   - **중립 😐**: 객관적 정보만 보기
3. 감성 분포로 시장 분위기 파악:
   - 긍정 뉴스 많음 → 매수 타이밍
   - 부정 뉴스 많음 → 주의 필요
   - 중립 뉴스 많음 → 안정적 상태

### 연도별 비교 분석 (한국 주식)
- 회사 선택 후 사업연도를 변경하면 자동으로 연도별 비교 차트 업데이트
- 최근 3년간의 데이터를 자동으로 가져와서 추이 분석

### AI 재무제표 분석 사용하기
1. 회사 선택 및 재무 데이터 조회 완료 후
2. "🤖 AI 재무제표 분석" 섹션에서 "AI 분석 시작" 버튼 클릭
3. 10-20초 후 쉬운 언어로 된 분석 결과 확인
4. 재무 건전성, 수익성, 안정성, 투자 관점 등 종합 분석 제공

## 📋 API 정보

### 🇰🇷 Open DART API (한국 주식)
- **API 엔드포인트**: `https://opendart.fss.or.kr/api/fnlttSinglAcnt.json`
- **인증키**: 환경변수 `.env` 파일에서 관리
- **요청 제한**: 일반적으로 20,000건/일
- **주요 재무 항목**:
  - **재무상태표**: 자산총계, 부채총계, 자본총계
  - **손익계산서**: 매출액, 영업이익, 당기순이익(손실)
  - **연결재무제표 우선**: CFS 데이터가 있으면 우선 사용

### 🇺🇸 Finnhub API (미국 주식)
- **API 엔드포인트**: `https://finnhub.io/api/v1`
- **무료 플랜 제한**: 60 calls/분
- **지원 기능**:
  - ✅ 주식 검색 및 기본 정보
  - ✅ 실시간 주가 (15분 지연)
  - ✅ 재무 지표 (P/E, P/B, ROE 등)
  - ✅ **기업 뉴스** (최근 30일, 감성 분석 포함)
  - ✅ **동종 업계 비교** (Peers API)
  - ✅ 분석가 추천
  - ✅ 실적 발표 정보
- **배당 정보**: Yahoo Finance API 사용 (무료, 무제한)

### 🤖 Gemini AI API (AI 분석)
- **API 엔드포인트**: `https://generativelanguage.googleapis.com/v1beta`
- **무료 플랜**: 분당 15 requests, 일일 1,500 requests
- **기능**: 재무제표 및 주식 데이터 AI 분석

## 🛠️ 기술 스택

- **Backend**: Flask (Python)
- **Frontend**: HTML, CSS, JavaScript
- **차트 라이브러리**: Chart.js
- **API**: Open DART API
- **환경 관리**: python-dotenv

## 📝 주의사항

1. **API 키 필수**: 
   - 한국 주식: `.env` 파일에 유효한 Open DART API 키 필요
   - 미국 주식: Finnhub API 키 필요 (무료 플랜 가능)
   - AI 분석: Gemini API 키 필요 (선택사항)

2. **데이터 가용성**: 
   - **한국 주식**:
     - 2025년 사업보고서: 2026년 3월 제출 예정 (현재 없음)
     - 2025년 3분기보고서: 2025년 11월 제출 예정 (현재 없음)
     - 모든 회사의 모든 연도 데이터가 있는 것은 아님
   - **미국 주식**:
     - 실시간 주가는 15분 지연
     - 일부 소형주는 데이터가 제한적일 수 있음
     - 배당 정보는 배당주에만 제공

3. **보고서 제출 일정** (한국 주식):
   - 사업보고서: 매년 3월 말까지 (전년도 데이터)
   - 분기보고서: 분기 종료 후 45일 이내

4. **API 요청 제한**:
   - Finnhub 무료 플랜: 60 calls/분
   - 동종 업계 비교 시 여러 API 호출로 시간이 걸릴 수 있음
   - 과도한 요청 시 일시적으로 차단될 수 있음

5. **AI 분석 기능**:
   - Gemini API 키가 설정되지 않으면 AI 분석 기능 비활성화
   - AI 분석은 10-45초 정도 소요 (모델에 따라 다름)
   - 분석 결과는 참고용이며 투자 결정의 유일한 근거로 사용하지 마세요

6. **뉴스 감성 분석**:
   - Finnhub API의 자동 감성 분석 결과
   - 참고용이며 100% 정확하지 않을 수 있음

7. **응답 시간**: API 호출로 인해 데이터 로딩에 시간이 걸릴 수 있음

8. **브라우저 호환성**: 최신 브라우저 권장 (Chrome, Firefox, Safari, Edge)

## 🔧 문제 해결

### API 오류 메시지
- **010**: 등록되지 않은 키 → API 키 확인
- **013**: 조회된 데이터가 없음 → 다른 연도나 보고서 유형 시도
- **020**: 요청 제한 초과 → 잠시 후 재시도

### 차트가 표시되지 않는 경우
1. 브라우저 콘솔에서 JavaScript 오류 확인
2. 네트워크 탭에서 API 응답 확인
3. 페이지 새로고침 시도

## 📞 지원

문제가 발생하면 다음을 확인해주세요:
1. `.env` 파일의 API 키 설정
2. 인터넷 연결 상태
3. Open DART API 서비스 상태
4. 브라우저 개발자 도구의 오류 메시지